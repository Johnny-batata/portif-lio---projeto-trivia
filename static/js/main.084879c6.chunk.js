(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{109:function(e,t,a){e.exports=a.p+"static/media/ampulheta.06137282.gif"},113:function(e,t,a){e.exports=a(216)},122:function(e,t,a){},123:function(e,t,a){},132:function(e,t){},134:function(e,t){},167:function(e,t){},168:function(e,t){},174:function(e,t){},211:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(44),c=a.n(s),i=a(20),o=a(47),l=(a(122),a(7)),u=a(8),d=a(10),m=a(9),p=a(11),b=a(21),h=a(46),f=a(4),v=(a(123),a(6)),g=a.n(v);function y(e,t){var a,n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g.a.awrap(fetch("https://opentdb.com/api.php?amount=".concat(e,"&token=").concat(t)));case 2:return a=r.sent,r.next=5,g.a.awrap(a.json());case 5:return n=r.sent,r.abrupt("return",n);case 7:case"end":return r.stop()}}))}function E(){var e,t;return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.a.awrap(fetch("https://opentdb.com/api_token.php?command=request"));case 2:return e=a.sent,a.next=5,g.a.awrap(e.json());case 5:return t=a.sent,5,localStorage.setItem("token",t.token),a.abrupt("return",y(5,t.token));case 9:case"end":return a.stop()}}))}var k=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={name:"",email:"",buttonReady:!1,isRedirect:!1},a.handleChange=a.handleChange.bind(Object(f.a)(a)),a.emailVerify=a.emailVerify.bind(Object(f.a)(a)),a.onClick=a.onClick.bind(Object(f.a)(a)),a.handleFormLabel=a.handleFormLabel.bind(Object(f.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"onClick",value:function(){var e=this.state,t=e.name,a=e.email;E();var n={player:{name:t,assertions:0,score:0,gravatarEmail:a}};this.setState({isRedirect:!0}),localStorage.setItem("state",JSON.stringify(n))}},{key:"emailVerify",value:function(){var e=this.state,t=e.name,a=e.email;return t.length>0&&a.length>0?this.setState({buttonReady:!0}):this.setState({buttonReady:!1})}},{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.emailVerify(),this.setState(Object(h.a)({},n,a))}},{key:"handleFormLabel",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"labels-input",htmlFor:"name"},"Nome",r.a.createElement("input",{className:"config-input",id:"name",name:"name",onChange:this.handleChange,"data-testid":"input-player-name",type:"text",placeholder:"Digite seu nome"})),r.a.createElement("label",{className:"labels-input",htmlFor:"email"},"Email",r.a.createElement("input",{className:"config-input",id:"email",name:"email","data-testid":"input-gravatar-email",onChange:this.handleChange,type:"email",placeholder:"Digite seu email"})))}},{key:"render",value:function(){var e=this.handleFormLabel,t=this.state,a=t.buttonReady,n=t.isRedirect;return r.a.createElement("div",{className:"main"},r.a.createElement("span",{className:"bem-vindo"}," Bem vindo "),r.a.createElement("span",{className:"bem-vindo2"},"Trybe Quiz "),r.a.createElement("section",{className:"form-login"},e(),r.a.createElement("button",{type:"button",disabled:!a,"data-testid":"btn-play",onClick:this.onClick}," ","JOGAR"," "),n&&r.a.createElement(b.a,{to:"/game"}),r.a.createElement("div",{className:"settings"},r.a.createElement(i.b,{to:"/settings"},r.a.createElement("button",{className:"btn-settings",type:"button","data-testid":"btn-settings"}," ","CONFIGURA\xc7\xd5ES")))))}}]),t}(n.Component),O=a(31),j=a(108),S=a.n(j);function N(e){var t,a,n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=S()(e).toString(),r.next=3,g.a.awrap(fetch("https://www.gravatar.com/avatar/".concat(t)));case 3:return a=r.sent,r.next=6,g.a.awrap(a);case 6:return n=r.sent,r.abrupt("return",n.url);case 8:case"end":return r.stop()}}))}var w=a(112),x=(a(211),a(109)),C=a.n(x),A=(a(212),"correct-answer"),Q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={perguntas:[],answers:[],assertions:0,indice:0,disable:e.disable,timer:30,score:0,isRedirect:!1},a.updtadeQuestions=a.updtadeQuestions.bind(Object(f.a)(a)),a.checkAnswer=a.checkAnswer.bind(Object(f.a)(a)),a.renderQuestions=a.renderQuestion.bind(Object(f.a)(a)),a.timer=a.timer.bind(Object(f.a)(a)),a.nextQuestion=a.nextQuestion.bind(Object(f.a)(a)),a.clearStyles=a.clearStyles.bind(Object(f.a)(a)),a.renderNextQuestionButton=a.renderNextQuestionButton.bind(Object(f.a)(a)),a.freezedByTimer=a.freezedByTimer.bind(Object(f.a)(a)),a.updateLocalStorage=a.updateLocalStorage.bind(Object(f.a)(a)),a.setAnswersProperties=a.setAnswersProperties.bind(Object(f.a)(a)),a.renderAnswers=a.renderAnswers.bind(Object(f.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;E().then((function(t){return e.updtadeQuestions(t)})),this.timer()}},{key:"setAnswersProperties",value:function(){var e=this.state,t=e.perguntas,a=e.indice,n=t[a].incorrect_answers.map((function(e,t){return{answer:e,name:"wrong-answer",testid:"wrong-answer-".concat(t)}})),r=[{answer:"".concat(t[a].correct_answer),name:A,testid:A}].concat(Object(w.a)(n)).sort((function(){return Math.random()-.5}));this.setState({answers:r})}},{key:"nextQuestion",value:function(){var e=this;if(this.state.indice+1===5)return this.setState({isRedirect:!0});this.setState((function(e){return{indice:e.indice+1,timer:30,disable:!1}}),(function(){return e.setAnswersProperties()})),this.clearStyles()}},{key:"clearStyles",value:function(){document.querySelectorAll(".default").forEach((function(e){e.classList.remove("green-border"),e.classList.remove("red-border")}))}},{key:"updtadeQuestions",value:function(e){var t=this,a=JSON.parse(localStorage.getItem("state"));this.setState({perguntas:e.results,score:a.player.score},(function(){return t.setAnswersProperties()}))}},{key:"calcQuestionScore",value:function(){var e=this,t=this.state,a=t.indice,n=t.perguntas,r=this.props.timer,s=n[a].difficulty,c=10+r*(s="hard"===s?3:"medium"===s?2:1);this.setState((function(e){return{score:e.score+c,assertions:e.assertions+1}}),(function(){return e.updateLocalStorage()}))}},{key:"updateLocalStorage",value:function(){var e=this.state,t=e.score,a=e.assertions,n=this.props.updateScore,r=JSON.parse(localStorage.getItem("state")),s={player:{name:r.player.name,assertions:a,score:t,gravatarEmail:r.player.gravatarEmail}};n(t),localStorage.setItem("state",JSON.stringify(s))}},{key:"checkAnswer",value:function(e){var t=e.target.name,a=document.querySelectorAll(".default");this.setState({disable:!0}),a.forEach((function(e){return e.name===A?e.classList.add("green-border"):e.classList.add("red-border")})),t===A&&this.calcQuestionScore()}},{key:"regress",value:function(){var e=this.state.timer;if(0===e&&this.freezedByTimer(),e>0)return this.setState((function(e){return{timer:e.timer-1}}))}},{key:"timer",value:function(){var e=this;setInterval((function(){e.regress()}),1e3)}},{key:"freezedByTimer",value:function(){return this.setState({disable:!0})}},{key:"renderAnswers",value:function(){var e=this,t=this.state,a=t.answers,n=t.disable;return a.map((function(t,a){var s=t.answer,c=t.name,i=t.testid;return r.a.createElement("button",{key:a,type:"button","data-testid":i,name:c,disabled:n,className:"default btn-answer",onClick:e.checkAnswer},s.replace(/&quot;/g,'"').replace(/&#039;/g,"'"))}))}},{key:"renderQuestion",value:function(){var e=this.state,t=e.perguntas,a=e.indice,n=e.timer,s=t[a],c=s.category,i=s.question;return r.a.createElement("div",{className:"conteudo"},r.a.createElement("div",{className:"sideA"},r.a.createElement("p",{className:"question-now","data-testid":"question-text"},"Pergunta: ".concat(i.replace(/&quot;/g,'"').replace(/&#039;/g,"'"))),r.a.createElement("p",{className:"question-category-now","data-testid":"question-category"},"Categoria ".concat(c))),r.a.createElement("div",{className:"sideB"},r.a.createElement("div",{className:"timmer"},"00:".concat(n>=10?n:"0".concat(n)),n>0&&r.a.createElement("img",{className:"imagem",src:C.a,alt:"img"})),r.a.createElement("div",{className:"answers"},this.renderAnswers())))}},{key:"renderNextQuestionButton",value:function(){var e=this.state,t=e.disable,a=e.timer;if(t||!a)return r.a.createElement("button",{className:"btn-next",type:"button",disabled:!t,"data-testid":"btn-next",onClick:this.nextQuestion},"Pr\xf3xima pergunta")}},{key:"render",value:function(){var e=this.state,t=e.perguntas,a=e.isRedirect;return t.length<1?r.a.createElement("p",null,"Carregando..."):r.a.createElement("div",{className:"form-questions"},a&&r.a.createElement(b.a,{to:"/feedback"}),this.renderQuestion(),this.renderNextQuestionButton())}}]),t}(r.a.Component),R=Object(o.b)((function(e){return{disable:e.controls.disable,timer:e.controls.timer}}),(function(e){return{toggleEnable:function(t){return e({type:"ENABLE_CONTROL",payload:t})}}}))(Q),B=(a(213),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).state={url:"",score:0,name:""},e.updateState=e.updateState.bind(Object(f.a)(e)),e.header=e.header.bind(Object(f.a)(e)),e.updateScore=e.updateScore.bind(Object(f.a)(e)),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("state"));this.updateState(e)}},{key:"updateScore",value:function(e){this.setState((function(t){return Object(O.a)({},t,{score:e})}))}},{key:"updateState",value:function(e){var t=this;return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.a.awrap(N(e.player.gravatarEmail).then((function(e){return t.setState({url:e})})));case 2:this.setState({score:e.player.score}),this.setState({name:e.player.name});case 4:case"end":return a.stop()}}),null,this)}},{key:"header",value:function(){var e=this.state,t=e.url,a=e.score,n=e.name;return r.a.createElement("header",null,r.a.createElement("div",{className:"header-sideA"},r.a.createElement("img",{src:t,alt:"player.jpeg","data-testid":"header-profile-picture"})),r.a.createElement("div",{className:"header-sideB"},r.a.createElement("div",{className:"side-b1"},r.a.createElement("span",{"data-testid":"header-player-name"},"Usu\xe1rio: ".concat(n)),r.a.createElement("span",{"data-testid":"header-score"},"Pontua\xe7\xe3o: ".concat(a))),r.a.createElement("div",{className:"side-b2"},r.a.createElement("span",{className:"trybeQuiz"},"Trybe Quiz"))))}},{key:"render",value:function(){return r.a.createElement("div",{className:"content"},this.header(),r.a.createElement(R,{updateScore:this.updateScore}))}}]),t}(n.Component)),I=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",{"data-testid":"settings-title"}," Bem vindo as configura\xe7\xf5es.   "))}}]),t}(n.Component),L=(a(214),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).state={url:"",score:0,name:"",assertions:0},e.updateState=e.updateState.bind(Object(f.a)(e)),e.header=e.header.bind(Object(f.a)(e)),e.scoreFeedback=e.scoreFeedback.bind(Object(f.a)(e)),e.createRanking=e.createRanking.bind(Object(f.a)(e)),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("state"));this.updateState(e)}},{key:"createRanking",value:function(){var e=this.state,t=e.url,a=e.score,n=e.name,r=JSON.parse(localStorage.getItem("ranking"))||[],s={name:n,score:a,picture:t};r.push(s),r.sort((function(e,t){return t.score-e.score})),localStorage.setItem("ranking",JSON.stringify(r))}},{key:"updateState",value:function(e){var t=this;return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.a.awrap(N(e.player.gravatarEmail).then((function(e){return t.setState({url:e})})));case 2:this.setState({score:e.player.score}),this.setState({name:e.player.name}),this.setState({assertions:e.player.assertions});case 5:case"end":return a.stop()}}),null,this)}},{key:"scoreFeedback",value:function(){return this.state.assertions<3?r.a.createElement("p",{"data-testid":"feedback-text"},"Podia ser melhor..."):r.a.createElement("p",{"data-testid":"feedback-text"},"Mandou bem!")}},{key:"header",value:function(){var e=this.state,t=e.url,a=e.score,n=e.name;return r.a.createElement("header",null,r.a.createElement("div",{className:"header-sideA"},r.a.createElement("img",{src:t,alt:"player.jpeg","data-testid":"header-profile-picture"})),r.a.createElement("div",{className:"header-sideB"},r.a.createElement("div",{className:"side-b1"},r.a.createElement("span",{"data-testid":"header-player-name"},"Usu\xe1rio: ".concat(n)),r.a.createElement("span",{"data-testid":"header-score"},"Pontua\xe7\xe3o: ".concat(a))),r.a.createElement("div",{className:"side-b2"},r.a.createElement("span",{className:"trybeQuiz"},"Trybe Quiz"))))}},{key:"render",value:function(){var e=this.state,t=e.assertions,a=e.score;return r.a.createElement("div",{className:"main-feedback"},this.header(),this.scoreFeedback(),r.a.createElement("p",null,"Quest\xf5es corretas: ".concat(t)),r.a.createElement("p",{"data-testid":"feedback-total-score"},"Pontua\xe7\xe3o: ".concat(a)),r.a.createElement(i.b,{to:"/"},r.a.createElement("button",{"data-testid":"btn-play-again",type:"button"},"Jogar novamente")),r.a.createElement(i.b,{to:"/ranking"},r.a.createElement("button",{"data-testid":"btn-ranking",onClick:this.createRanking,type:"button"},"Ver Ranking")))}}]),t}(n.Component)),T=(a(215),function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("ranking"));return r.a.createElement("div",{className:"main-ranking"},r.a.createElement("p",{className:"ranking-trybe-quiz","data-testid":"ranking-title"},"Ranking Trybe Quiz"),r.a.createElement("div",{className:"conteudo-ranking"},e.map((function(e,t){return r.a.createElement("section",{className:"content-ranking",key:e.name},r.a.createElement("div",{className:"ranking-sideA"},r.a.createElement("img",{className:"img-ranking",src:e.picture,alt:e.name})),r.a.createElement("div",{className:"ranking-sideB"},r.a.createElement("span",null,"Posi\xe7\xe3o: ".concat(t+1)),r.a.createElement("span",{"data-testid":"player-name-".concat(t)},"Jogador: ".concat(e.name)),r.a.createElement("span",{"data-testid":"player-score-".concat(t)},"Pontua\xe7\xe3o: ".concat(e.score))))}))),r.a.createElement(i.b,{to:"/"},r.a.createElement("button",{className:"go-to-home","data-testid":"btn-go-home",type:"button"},"In\xedcio")))}}]),t}(n.Component)),J=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(b.d,null,r.a.createElement(b.b,{exact:!0,path:"/",component:k}),r.a.createElement(b.b,{exact:!0,path:"/game",component:B}),r.a.createElement(b.b,{exact:!0,path:"/settings",component:I}),r.a.createElement(b.b,{exact:!0,path:"/feedback",component:L}),r.a.createElement(b.b,{exact:!0,path:"/ranking",component:T}))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=a(26),q=a(110),F=a(111),z={user:{email:""}};var M={disable:!1,timer:8};var D=Object(P.combineReducers)({controls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ENABLE_CONTROL":return Object(O.a)({},e,{disable:t.payload});case"UPDATE_TIMER":return Object(O.a)({},e,{timer:t.payload});case"RESTART_TIMER":return Object(O.a)({},e,{timer:8});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;return t.type,e}}),_=Object(P.createStore)(D,Object(F.composeWithDevTools)(Object(P.applyMiddleware)(q.a)));c.a.render(r.a.createElement(o.a,{store:_},r.a.createElement(i.a,null,r.a.createElement(J,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[113,1,2]]]);
//# sourceMappingURL=main.084879c6.chunk.js.map